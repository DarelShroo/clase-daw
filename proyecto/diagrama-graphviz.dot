digraph ER {
    rankdir=LR;
    fontname="Helvetica";

    node [shape=plaintext fontname="Helvetica"];

    // === USUARIOS ===
    USUARIOS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#cce5ff">
        <TR><TD COLSPAN="2"><B>USUARIOS</B></TD></TR>
        <TR><TD>int</TD><TD>id_usuario PK</TD></TR>
        <TR><TD>string</TD><TD>usuario</TD></TR>
        <TR><TD>string</TD><TD>password</TD></TR>
        </TABLE>
    >];

    ALUMNOS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#cce5ff">
        <TR><TD COLSPAN="2"><B>ALUMNOS</B></TD></TR>
        <TR><TD>int</TD><TD>id_alumno PK</TD></TR>
        <TR><TD>int</TD><TD>id_usuario FK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        </TABLE>
    >];

    PROFESORES [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#cce5ff">
        <TR><TD COLSPAN="2"><B>PROFESORES</B></TD></TR>
        <TR><TD>int</TD><TD>id_profesor PK</TD></TR>
        <TR><TD>int</TD><TD>id_usuario FK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        <TR><TD>string</TD><TD>departamento</TD></TR>
        <TR><TD>string</TD><TD>email</TD></TR>
        </TABLE>
    >];

    // === PROVEEDORES / ALBARANES / IMPUESTOS ===
    PROVEEDORES [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#f3d0ff">
        <TR><TD COLSPAN="2"><B>PROVEEDORES</B></TD></TR>
        <TR><TD>int</TD><TD>id_proveedor PK</TD></TR>
        <TR><TD>int</TD><TD>id_usuario FK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        <TR><TD>string</TD><TD>direccion</TD></TR>
        <TR><TD>string</TD><TD>telefono</TD></TR>
        <TR><TD>string</TD><TD>email</TD></TR>
        </TABLE>
    >];

    ALBARANES [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#f3d0ff">
        <TR><TD COLSPAN="2"><B>ALBARANES</B></TD></TR>
        <TR><TD>int</TD><TD>id_albaran PK</TD></TR>
        <TR><TD>int</TD><TD>id_proveedor FK</TD></TR>
        <TR><TD>int</TD><TD>id_unidad FK</TD></TR>
        <TR><TD>int</TD><TD>id_impuesto FK</TD></TR>
        <TR><TD>int</TD><TD>n_albaran</TD></TR>
        <TR><TD>string</TD><TD>descripcion</TD></TR>
        <TR><TD>int</TD><TD>cantidad</TD></TR>
        <TR><TD>string</TD><TD>observaciones</TD></TR>
        <TR><TD>decimal</TD><TD>coste_total</TD></TR>
        <TR><TD>boolean</TD><TD>concordancia</TD></TR>
        </TABLE>
    >];

    IMPUESTOS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#f3d0ff">
        <TR><TD COLSPAN="2"><B>IMPUESTOS</B></TD></TR>
        <TR><TD>int</TD><TD>id_impuesto PK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        <TR><TD>decimal</TD><TD>porcentaje</TD></TR>
        </TABLE>
    >];

    UNIDADES [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#ffd9b3">
        <TR><TD COLSPAN="2"><B>UNIDADES</B></TD></TR>
        <TR><TD>int</TD><TD>id_unidad PK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        </TABLE>
    >];

    // === PEDIDOS / BAJAS ===
    PEDIDOS_INTERNO [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#ffcccc">
        <TR><TD COLSPAN="2"><B>PEDIDOS_INTERNO</B></TD></TR>
        <TR><TD>int</TD><TD>id_distribucion PK</TD></TR>
        <TR><TD>int</TD><TD>id_profesor FK</TD></TR>
        <TR><TD>int</TD><TD>id_unidad FK</TD></TR>
        <TR><TD>date</TD><TD>fecha_pedido</TD></TR>
        <TR><TD>date</TD><TD>fecha_entrega</TD></TR>
        <TR><TD>string</TD><TD>descripcion</TD></TR>
        <TR><TD>int</TD><TD>cantidad</TD></TR>
        <TR><TD>decimal</TD><TD>coste_kg</TD></TR>
        <TR><TD>decimal</TD><TD>coste_total</TD></TR>
        </TABLE>
    >];

    BAJAS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#ffffcc">
        <TR><TD COLSPAN="2"><B>BAJAS</B></TD></TR>
        <TR><TD>int</TD><TD>id_bajas PK</TD></TR>
        <TR><TD>int</TD><TD>id_unidad FK</TD></TR>
        <TR><TD>date</TD><TD>fecha_baja</TD></TR>
        <TR><TD>string</TD><TD>descripcion</TD></TR>
        <TR><TD>int</TD><TD>cantidad</TD></TR>
        <TR><TD>decimal</TD><TD>coste</TD></TR>
        <TR><TD>int</TD><TD>coste_total</TD></TR>
        <TR><TD>string</TD><TD>observaciones</TD></TR>
        </TABLE>
    >];

    // === INVENTARIO / PRODUCTOS ===
    INFORMES_INVENTARIO [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#e0ccff">
        <TR><TD COLSPAN="2"><B>INFORMES_INVENTARIO</B></TD></TR>
        <TR><TD>int</TD><TD>id_informe_inventario PK</TD></TR>
        <TR><TD>string</TD><TD>descripcion</TD></TR>
        <TR><TD>int</TD><TD>cantidad</TD></TR>
        <TR><TD>string</TD><TD>valoracion_monetaria</TD></TR>
        <TR><TD>int</TD><TD>total_items</TD></TR>
        <TR><TD>int</TD><TD>total_vm</TD></TR>
        </TABLE>
    >];

    PRODUCTOS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#e0f7fa">
        <TR><TD COLSPAN="2"><B>PRODUCTOS</B></TD></TR>
        <TR><TD>int</TD><TD>id_producto PK</TD></TR>
        <TR><TD>string</TD><TD>nombre</TD></TR>
        <TR><TD>string</TD><TD>imagen</TD></TR>
        <TR><TD>int</TD><TD>codigo</TD></TR>
        </TABLE>
    >];

    RENDIMIENTOS [label=<
        <TABLE BORDER="1" CELLBORDER="1" CELLSPACING="0" BGCOLOR="#e0f7fa">
        <TR><TD COLSPAN="2"><B>RENDIMIENTOS</B></TD></TR>
        <TR><TD>int</TD><TD>id_rendimiento PK</TD></TR>
        <TR><TD>int</TD><TD>id_producto FK</TD></TR>
        <TR><TD>decimal</TD><TD>peso_bruto</TD></TR>
        <TR><TD>decimal</TD><TD>peso_neto</TD></TR>
        <TR><TD>string</TD><TD>desperdicio</TD></TR>
        <TR><TD>decimal</TD><TD>porcentaje_total</TD></TR>
        <TR><TD>decimal</TD><TD>porcentaje_rendimiento</TD></TR>
        <TR><TD>decimal</TD><TD>porcentaje_merma</TD></TR>
        </TABLE>
    >];

    // === RELACIONES ===
    USUARIOS -> ALUMNOS [label="tiene"];
    USUARIOS -> PROFESORES [label="tiene"];
    PROVEEDORES -> ALBARANES [label="pertenece a"];
    UNIDADES -> ALBARANES [label="detalla"];
    IMPUESTOS -> ALBARANES [label="contiene"];
    PROFESORES -> PEDIDOS_INTERNO [label="genera"];
    UNIDADES -> PEDIDOS_INTERNO [label="detalla"];
    UNIDADES -> BAJAS [label="detalla"];
    PRODUCTOS -> RENDIMIENTOS [label="tiene"];
}

